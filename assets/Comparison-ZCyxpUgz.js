import{c as ke,d as Ae,t as De,u as $e,e as Ze,_ as Je,f as na,h as ra,i as ia,j as ca,k as ua,p as da,U as Qe,l as Ke,n as va,o as Ge,w as pa,q as ma,a as he,g as xe,m as _a,b as fa}from"./common-C8HLR-ue.js";import{c as Ce,E as ba,a as ha,b as ya}from"./el-radio-group-B-Vh-jVO.js";import{E as ga,a as xa}from"./el-popover-CdiloPZn.js";import{f as te,d as Ca,E as wa,a as Sa,b as ka,c as $a,g as Ta,h as Ea,e as Na}from"./el-select-CMog_fd-.js";import{G as Ve,H as Pe,I as Ra,J as ve,K as Oe,r as i,x as ce,h as Q,o as k,c as N,n as Be,f as B,L as He,M as Te,C as ye,y as pe,q as Va,d as b,s as Ma,N as Fe,O as za,P as Pa,a as Xe,E as Ye,e as U,v as K,k as de,b as e,_ as Ee,F as L,g as q,t as I,p as Le,l as je,w as O,i as ae,j as le,Q as Fa,R as Aa}from"./index-DMF0Htu1.js";import{i as Ie}from"./index-DNSscJ2R.js";import"./linesGL-CN2UtC-e.js";import{m as ea,E as we}from"./el-input-CiS9qPlG.js";const Se=t=>{const m=Ve(t)?t:[t],h=[];return m.forEach(u=>{var _;Ve(u)?h.push(...Se(u)):Pe(u)&&Ve(u.children)?h.push(...Se(u.children)):(h.push(u),Pe(u)&&((_=u.component)!=null&&_.subTree)&&h.push(...Se(u.component.subTree)))}),h},Da=(t,m,h)=>Se(t.subTree).filter(a=>{var d;return Pe(a)&&((d=a.type)==null?void 0:d.name)===m&&!!a.component}).map(a=>a.component.uid).map(a=>h[a]).filter(a=>!!a),Oa=(t,m)=>{const h={},u=Ra([]);return{children:u,addChild:d=>{h[d.uid]=d,u.value=Da(t,m,h)},removeChild:d=>{delete h[d],u.value=u.value.filter(x=>x.uid!==d)}}},Ne=Symbol("tabsRootContextKey"),Ba=ke({tabs:{type:Ae(Array),default:()=>ea([])}}),aa="ElTabBar",Ha=ve({name:aa}),La=ve({...Ha,props:Ba,setup(t,{expose:m}){const h=t,u=Te(),_=Oe(Ne);_||De(aa,"<el-tabs><el-tab-bar /></el-tabs>");const a=$e("tabs"),d=i(),x=i(),l=()=>{let r=0,v=0;const f=["top","bottom"].includes(_.props.tabPosition)?"width":"height",o=f==="width"?"x":"y",T=o==="x"?"left":"top";return h.tabs.every(y=>{var p,V;const c=(V=(p=u.parent)==null?void 0:p.refs)==null?void 0:V[`tab-${y.uid}`];if(!c)return!1;if(!y.active)return!0;r=c[`offset${te(T)}`],v=c[`client${te(f)}`];const C=window.getComputedStyle(c);return f==="width"&&(v-=Number.parseFloat(C.paddingLeft)+Number.parseFloat(C.paddingRight),r+=Number.parseFloat(C.paddingLeft)),!1}),{[f]:`${v}px`,transform:`translate${te(o)}(${r}px)`}},s=()=>x.value=l();return ce(()=>h.tabs,async()=>{await Q(),s()},{immediate:!0}),Ze(d,()=>s()),m({ref:d,update:s}),(r,v)=>(k(),N("div",{ref_key:"barRef",ref:d,class:Be([B(a).e("active-bar"),B(a).is(B(_).props.tabPosition)]),style:He(x.value)},null,6))}});var ja=Je(La,[["__file","tab-bar.vue"]]);const Ia=ke({panes:{type:Ae(Array),default:()=>ea([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),Ua={tabClick:(t,m,h)=>h instanceof Event,tabRemove:(t,m)=>m instanceof Event},We="ElTabNav",qa=ve({name:We,props:Ia,emits:Ua,setup(t,{expose:m,emit:h}){const u=Te(),_=Oe(Ne);_||De(We,"<el-tabs><tab-nav /></el-tabs>");const a=$e("tabs"),d=na(),x=ra(),l=i(),s=i(),r=i(),v=i(),f=i(!1),o=i(0),T=i(!1),y=i(!0),p=ye(()=>["top","bottom"].includes(_.props.tabPosition)?"width":"height"),V=ye(()=>({transform:`translate${p.value==="width"?"X":"Y"}(-${o.value}px)`})),c=()=>{if(!l.value)return;const S=l.value[`offset${te(p.value)}`],n=o.value;if(!n)return;const w=n>S?n-S:0;o.value=w},C=()=>{if(!l.value||!s.value)return;const S=s.value[`offset${te(p.value)}`],n=l.value[`offset${te(p.value)}`],w=o.value;if(S-w<=n)return;const A=S-w>n*2?w+n:S-n;o.value=A},E=async()=>{const S=s.value;if(!f.value||!r.value||!l.value||!S)return;await Q();const n=r.value.querySelector(".is-active");if(!n)return;const w=l.value,A=["top","bottom"].includes(_.props.tabPosition),D=n.getBoundingClientRect(),M=w.getBoundingClientRect(),H=A?S.offsetWidth-M.width:S.offsetHeight-M.height,F=o.value;let z=F;A?(D.left<M.left&&(z=F-(M.left-D.left)),D.right>M.right&&(z=F+D.right-M.right)):(D.top<M.top&&(z=F-(M.top-D.top)),D.bottom>M.bottom&&(z=F+(D.bottom-M.bottom))),z=Math.max(z,0),o.value=Math.min(z,H)},Y=()=>{var S;if(!s.value||!l.value)return;t.stretch&&((S=v.value)==null||S.update());const n=s.value[`offset${te(p.value)}`],w=l.value[`offset${te(p.value)}`],A=o.value;w<n?(f.value=f.value||{},f.value.prev=A,f.value.next=A+w<n,n-A<w&&(o.value=n-w)):(f.value=!1,A>0&&(o.value=0))},oe=S=>{const n=S.code,{up:w,down:A,left:D,right:M}=Ce;if(![w,A,D,M].includes(n))return;const H=Array.from(S.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)")),F=H.indexOf(S.target);let z;n===D||n===w?F===0?z=H.length-1:z=F-1:F<H.length-1?z=F+1:z=0,H[z].focus({preventScroll:!0}),H[z].click(),j()},j=()=>{y.value&&(T.value=!0)},se=()=>T.value=!1;return ce(d,S=>{S==="hidden"?y.value=!1:S==="visible"&&setTimeout(()=>y.value=!0,50)}),ce(x,S=>{S?setTimeout(()=>y.value=!0,50):y.value=!1}),Ze(r,Y),pe(()=>setTimeout(()=>E(),0)),Va(()=>Y()),m({scrollToActiveTab:E,removeFocus:se}),ce(()=>t.panes,()=>u.update(),{flush:"post",deep:!0}),()=>{const S=f.value?[b("span",{class:[a.e("nav-prev"),a.is("disabled",!f.value.prev)],onClick:c},[b(we,null,{default:()=>[b(ia,null,null)]})]),b("span",{class:[a.e("nav-next"),a.is("disabled",!f.value.next)],onClick:C},[b(we,null,{default:()=>[b(ca,null,null)]})])]:null,n=t.panes.map((w,A)=>{var D,M,H,F;const z=w.uid,ne=w.props.disabled,re=(M=(D=w.props.name)!=null?D:w.index)!=null?M:`${A}`,_e=!ne&&(w.isClosable||t.editable);w.index=`${A}`;const ee=_e?b(we,{class:"is-icon-close",onClick:G=>h("tabRemove",w,G)},{default:()=>[b(ua,null,null)]}):null,ue=((F=(H=w.slots).label)==null?void 0:F.call(H))||w.props.label,ge=!ne&&w.active?0:-1;return b("div",{ref:`tab-${z}`,class:[a.e("item"),a.is(_.props.tabPosition),a.is("active",w.active),a.is("disabled",ne),a.is("closable",_e),a.is("focus",T.value)],id:`tab-${re}`,key:`tab-${z}`,"aria-controls":`pane-${re}`,role:"tab","aria-selected":w.active,tabindex:ge,onFocus:()=>j(),onBlur:()=>se(),onClick:G=>{se(),h("tabClick",w,re,G)},onKeydown:G=>{_e&&(G.code===Ce.delete||G.code===Ce.backspace)&&h("tabRemove",w,G)}},[ue,ee])});return b("div",{ref:r,class:[a.e("nav-wrap"),a.is("scrollable",!!f.value),a.is(_.props.tabPosition)]},[S,b("div",{class:a.e("nav-scroll"),ref:l},[b("div",{class:[a.e("nav"),a.is(_.props.tabPosition),a.is("stretch",t.stretch&&["top","bottom"].includes(_.props.tabPosition))],ref:s,style:V.value,role:"tablist",onKeydown:oe},[t.type?null:b(ja,{ref:v,tabs:[...t.panes]},null),n])])])}}}),Ka=ke({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:Ae(Function),default:()=>!0},stretch:Boolean}),Me=t=>za(t)||va(t),Ga={[Qe]:t=>Me(t),tabClick:(t,m)=>m instanceof Event,tabChange:t=>Me(t),edit:(t,m)=>["remove","add"].includes(m),tabRemove:t=>Me(t),tabAdd:()=>!0},Wa=ve({name:"ElTabs",props:Ka,emits:Ga,setup(t,{emit:m,slots:h,expose:u}){var _;const a=$e("tabs"),d=ye(()=>["left","right"].includes(t.tabPosition)),{children:x,addChild:l,removeChild:s}=Oa(Te(),"ElTabPane"),r=i(),v=i((_=t.modelValue)!=null?_:"0"),f=async(p,V=!1)=>{var c,C,E;if(!(v.value===p||Ke(p)))try{await((c=t.beforeLeave)==null?void 0:c.call(t,p,v.value))!==!1&&(v.value=p,V&&(m(Qe,p),m("tabChange",p)),(E=(C=r.value)==null?void 0:C.removeFocus)==null||E.call(C))}catch{}},o=(p,V,c)=>{p.props.disabled||(f(V,!0),m("tabClick",p,c))},T=(p,V)=>{p.props.disabled||Ke(p.props.name)||(V.stopPropagation(),m("edit",p.props.name,"remove"),m("tabRemove",p.props.name))},y=()=>{m("edit",void 0,"add"),m("tabAdd")};return ce(()=>t.modelValue,p=>f(p)),ce(v,async()=>{var p;await Q(),(p=r.value)==null||p.scrollToActiveTab()}),Ma(Ne,{props:t,currentName:v,registerPane:l,unregisterPane:s}),u({currentName:v}),()=>{const p=h["add-icon"],V=t.editable||t.addable?b("div",{class:[a.e("new-tab"),d.value&&a.e("new-tab-vertical")],tabindex:"0",onClick:y,onKeydown:E=>{E.code===Ce.enter&&y()}},[p?Fe(h,"add-icon"):b(we,{class:a.is("icon-plus")},{default:()=>[b(da,null,null)]})]):null,c=b("div",{class:[a.e("header"),d.value&&a.e("header-vertical"),a.is(t.tabPosition)]},[b(qa,{ref:r,currentName:v.value,editable:t.editable,type:t.type,panes:x.value,stretch:t.stretch,onTabClick:o,onTabRemove:T},null),V]),C=b("div",{class:a.e("content")},[Fe(h,"default")]);return b("div",{class:[a.b(),a.m(t.tabPosition),{[a.m("card")]:t.type==="card",[a.m("border-card")]:t.type==="border-card"}]},[...t.tabPosition!=="bottom"?[c,C]:[C,c]])}}}),Za=ke({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),Ja=["id","aria-hidden","aria-labelledby"],ta="ElTabPane",Qa=ve({name:ta}),Xa=ve({...Qa,props:Za,setup(t){const m=t,h=Te(),u=Pa(),_=Oe(Ne);_||De(ta,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const a=$e("tab-pane"),d=i(),x=ye(()=>m.closable||_.props.closable),l=Ge(()=>{var o;return _.currentName.value===((o=m.name)!=null?o:d.value)}),s=i(l.value),r=ye(()=>{var o;return(o=m.name)!=null?o:d.value}),v=Ge(()=>!m.lazy||s.value||l.value);ce(l,o=>{o&&(s.value=!0)});const f=Xe({uid:h.uid,slots:u,props:m,paneName:r,active:l,index:d,isClosable:x});return pe(()=>{_.registerPane(f)}),Ye(()=>{_.unregisterPane(f.uid)}),(o,T)=>B(v)?U((k(),N("div",{key:0,id:`pane-${B(r)}`,class:Be(B(a).b()),role:"tabpanel","aria-hidden":!B(l),"aria-labelledby":`tab-${B(r)}`},[Fe(o.$slots,"default")],10,Ja)),[[K,B(l)]]):de("v-if",!0)}});var la=Je(Xa,[["__file","tab-pane.vue"]]);const Ya=pa(Wa,{TabPane:la}),et=ma(la),at="data:image/svg+xml,%3csvg%20width='48'%20height='48'%20viewBox='0%200%2048%2048'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M22%2022V10H26V22H38V26H26V38H22V26H10V22H22Z'%20fill='%23C2C2C2'/%3e%3c/svg%3e",tt={class:""},ze={__name:"echart",setup(t,{expose:m}){const h=i(null);let u=null;return m({setRadarChart:(a,d,x)=>{let l=[];x?l=x:l=Object.keys(a[0][d]);let s=l.filter(v=>v!="model_name").map((v,f)=>({name:v,color:(f==0,"#000"),axisLabel:{show:f==0},min:-1,max:1})),r=[];for(let v=0;v<a.length;v++){let f=[];for(let o=0;o<s.length;o++)f.push(a[v][d][s[o].name]);r.push({value:f,areaStyle:{opacity:0,color:"#1093FF"},lineStyle:{width:2,color:a[v].color},itemStyle:{color:a[v].color}})}u.setOption({radar:{splitArea:{areaStyle:{color:["rgba(0,0,0,0.05)","rgba(0,0,0,0.03)"]}},splitNumber:5,axisName:{fontSize:16,color:"black",formatter:function(v){return v.split("&").join(`&
`)}},triggerEvent:!0,indicator:s},series:[{type:"radar",symbolSize:8,itemStyle:{color:"#4992ff"},data:r}]})}}),pe(async()=>{await Q(),u=Ie(h.value);const a={radar:{splitArea:{areaStyle:{color:["rgba(0,0,0,0.05)","rgba(0,0,0,0.03)"]}},axisLabel:{show:!0,fontSize:14},axisName:{fontSize:14,color:"#fff"},triggerEvent:!0,indicator:[{name:"Benevolence",max:1,color:"#ffd000"},{name:"Achievement",max:1,axisLabel:{show:!1}},{name:"Universalism",max:1,axisLabel:{show:!1}},{name:"Tradition",max:1,axisLabel:{show:!1}},{name:"Stimulation",max:1,axisLabel:{show:!1}},{name:"Self-direction",max:1,axisLabel:{show:!1}},{name:"Security",max:1,axisLabel:{show:!1}},{name:"Power",max:1,axisLabel:{show:!1}},{name:"Hedonism",max:1,axisLabel:{show:!1}},{name:"Conformity",max:1,axisLabel:{show:!1}}]}};u.setOption(a)}),(a,d)=>(k(),N("div",null,[e("div",tt,[e("div",null,[e("div",null,[e("div",{class:"chart",ref_key:"chartDom",ref:h,style:{width:"880px",height:"638px",margin:"0 auto"}},null,512)])])])]))}},Ue=t=>(Le("data-v-f68531e0"),t=t(),je(),t),lt={class:""},ot={class:"model-title"},st={class:"echart-list"},nt=Ue(()=>e("p",null,"Schwartz Theory of Basic Values",-1)),rt=Ue(()=>e("p",null,"Moral Foundation Theory",-1)),it=Ue(()=>e("p",null,"Diverse Safety Risks",-1)),ct={__name:"Visualization",setup(t,{expose:m}){const h=i(null),u=i(null),_=i(null);i(null);const a=i(null);return m({setRadarChart:(x,l)=>{a.value=x,h.value.setRadarChart(x,"Schwartz_data",l?l.Schwartz_data:null),u.value.setRadarChart(x,"MFT_data",l?l.MFT_data:null),_.value.setRadarChart(x,"Risk_data",l?l.Risk_data:null)}}),(x,l)=>(k(),N("div",null,[e("div",lt,[e("div",ot,[(k(!0),N(L,null,q(a.value,(s,r)=>(k(),N("div",{key:r},[e("span",{style:He([{"background-color":s.color},{}])},null,4),e("span",null,I(s.model_name),1)]))),128))]),e("div",st,[e("div",null,[nt,b(ze,{ref_key:"chartDom1",ref:h},null,512)]),e("div",null,[rt,b(ze,{ref_key:"chartDom2",ref:u},null,512)]),e("div",null,[it,b(ze,{ref_key:"chartDom3",ref:_},null,512)])])])]))}},ut=Ee(ct,[["__scopeId","data-v-f68531e0"]]),dt={class:"chart-box"},vt={class:"result-main"},pt={class:"chart-main"},mt={class:"card-item"},_t={__name:"ValueSpace",setup(t,{expose:m}){var h=null,u=["#71AD8A","#A27BBB","#7186C9","#ACD291","#E195D0","#ED8B5E","#96C8E0","#F3CF7F","#E38380","#C49361"];function _(l){console.log(l),d=Ie(a.value);const s="path://M1 11C6.52285 11 11 6.52285 11 1H13C13 6.52285 17.4772 11 23 11V13C17.4772 13 13 17.4772 13 23H11C11 17.4772 6.52285 13 1 13V11Z",r=[{type:"scatter3D",data:l.model,symbolSize:24,symbol:s,itemStyle:{opacity:1},label:{show:!0,formatter:"{b}",textStyle:{color:"#fff",fontSize:16,backgroundColor:"rgba(255,255,255,0)"}}}];l.model.forEach((o,T)=>{const y=l.node.slice(T*30,T*30+30);r.push({name:o.name,type:"scatter3D",data:y,symbolSize:8,symbol:s,label:{show:!1,formatter:""},itemStyle:{color:u[T],opacity:1}})}),h=Object.assign([],r);const v={legend:{show:!0,width:"1100",textStyle:{color:"#fff"}},tooltip:{appendToBody:!0,className:"tooltip",hideDelay:1e3,enterable:!0,triggerOn:"click",backgroundColor:"#0A111F",borderColor:"#0A111F",textStyle:{color:"#fff"},formatter:function(o){return o.data.type=="node"?`<div style="padding: 6px 28px;">
                  <pre style="text-align: left; white-space: pre-line;">${o.data.name}</pre>
                </div>`:""}},xAxis3D:{type:"value"},yAxis3D:{type:"value"},zAxis3D:{type:"value"},grid3D:{axisLine:{lineStyle:{color:"rgba(255,255,255,0.3)"}},axisPointer:{show:!1},splitLine:{lineStyle:{color:"rgba(255,255,255,0.3)"}},viewControl:{autoRotate:!0,autoRotateSpeed:4,autoRotateAfterStill:1,distance:130},top:"6%"},series:r};d.setOption(v);var f=!1;d.on("click",function(o){const T=d.getOption().series;o.data.type=="model"&&(f=!0,T.forEach(y=>{y.name&&y.name!=o.name&&(y.itemStyle={opacity:.1}),y.name||y.data.forEach(p=>{p.name!=o.name&&(p.itemStyle={opacity:.1})})}),d.setOption({series:T}))}),d.on("mousemove",function(o){f&&(d.setOption({series:h}),f=!1)})}const a=i(null);let d=null;return m({setValueSpacesData:async l=>{const s=l.map(function(T){return T.model_name});console.log(s);const r=await he.post("http://20.163.194.92:5000/api/calculate_model_value",{input:s});console.log(r.data);let f=r.data;const o={model:[],node:[]};o.model=f.tsne_models.map((T,y)=>({name:f.tsne_model_caption[y],value:T,type:"model",itemStyle:{color:u[y],opacity:1}})),o.node=f.tsne_nodes.map((T,y)=>({name:f.tsne_node_captions[y],value:T,type:"node",model:f.tsne_model_caption[Math.floor(y/30)]})),_(o)}}),pe(async()=>{await Q()}),(l,s)=>(k(),N("div",null,[e("div",dt,[e("div",vt,[e("div",pt,[e("div",mt,[e("div",{class:"chart",style:{width:"1100px",height:"800px"},ref_key:"chartDom",ref:a},null,512)])])])])]))}},ft=Ee(_t,[["__scopeId","data-v-7ab8e14c"]]),bt={class:""},ht={__name:"CulturalAlignment",setup(t,{expose:m}){const h=i(null);let u=null;const _=i(),a=i();let d=[];const x=async()=>he.get("./data/value_sim_heatmap.json").then(s=>{_.value=s.data;const r={};for(let v=0;v<s.data.models.length;v++)r[s.data.models[v]]=s.data.cosine_sim_matrix[v];a.value=r}),l=s=>{let r=[];if(s){let y=[];for(var v=0;v<s.length;v++)y.push(a.value[s[v]]);r={cosine_sim_matrix:y,models:s,countries:d}}else r={cosine_sim_matrix:[_.value.cosine_sim_matrix[0]],models:[_.value.models[0]],countries:d};console.log("modelNameList",s,r);var f=[];for(let y=0;y<r.cosine_sim_matrix.length;y++)for(let p=0;p<r.countries.length;p++)f.push([y,p,r.cosine_sim_matrix[y][p]]);const o=r.models,T=f.map(function(y){return[y[1],y[0],(y[2]*100).toFixed(3)||"-"]});u.setOption({yAxis:{type:"category",data:o,splitArea:{show:!0},axisLabel:{color:"#000",fontSize:16}},series:[{name:"Punch Card",type:"heatmap",data:T,label:{show:!0},emphasis:{itemStyle:{shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]})};return m({setHotChart:l}),pe(async()=>{await Q(),await x(),d=_.value.countries;const s=_.value.models;u=Ie(h.value);const r={tooltip:{position:"top"},grid:{height:"50%",top:"10%",left:"2%",containLabel:!0},xAxis:{type:"category",data:d,splitArea:{show:!0},axisLabel:{color:"#000",fontSize:16}},yAxis:{type:"category",data:s,splitArea:{show:!0},axisLabel:{color:"#000",fontSize:16}},visualMap:{min:0,max:100,calculable:!0,orient:"horizontal",left:"center",bottom:"15%",color:["#690320","#E0785F","#eeeeee","#4795C3","#083669"],textStyle:{color:"#000"}}};u.setOption(r),l()}),(s,r)=>(k(),N("div",null,[e("div",bt,[e("div",null,[e("div",null,[e("div",{class:"chart",ref_key:"chartDom",ref:h,style:{width:"1200px",height:"600px",margin:"0 auto"}},null,512)])])])]))}},me=t=>(Le("data-v-d9ca4a9d"),t=t(),je(),t),yt={class:"content-filter"},gt={class:"panel-content"},xt=me(()=>e("div",{class:"title"},"Applied filters",-1)),Ct={class:"panel-row"},wt=me(()=>e("div",{class:"filter-name"},"Measurement Date",-1)),St={class:"panel-tags"},kt={class:"title"},$t={class:"panel-row"},Tt=me(()=>e("div",{class:"filter-name"},"Schwartz Value Theory",-1)),Et={class:"panel-tags"},Nt={class:"panel-row"},Rt=me(()=>e("div",{class:"filter-name"},"Moral Foundation Theory",-1)),Vt={class:"panel-tags"},Mt={class:"panel-row"},zt=me(()=>e("div",{class:"filter-name"},"Diverse Safety Risks",-1)),Pt={class:"panel-tags"},Ft={class:"panel-row"},At=me(()=>e("div",{class:"filter-name"},"LLMs' Unique Values",-1)),Dt={class:"panel-tags"},Ot={__name:"selectBox",emits:["fitterChange"],setup(t,{emit:m}){i();const h={multiple:!0},u=i([]),_=i(!1),a=i(null),d=i(0);let x=Xe({});const l=[{value:0,label:"Universal"},{value:1,label:"Schwartz Value Theory",children:[{value:0,label:"Achievement"},{value:1,label:"Benevolence"},{value:2,label:"Conformity"},{value:3,label:"Hedonism"},{value:4,label:"Power"},{value:5,label:"Security"},{value:6,label:"Self-direction"},{value:7,label:"Stimulation"},{value:8,label:"Tradition"},{value:9,label:"Universalism"}]},{value:2,label:"Moral Foundation Theory",children:[{value:0,label:"Authority"},{value:1,label:"Care"},{value:2,label:"Fairness"},{value:3,label:"Loyalty"},{value:4,label:"Sanctity"}]},{value:3,label:"Diverse Safety Risks",children:[{value:0,label:"Misinformation Harms"},{value:1,label:"Representation & Toxicity Harms"},{value:2,label:"Socioeconomic Harms"},{value:3,label:"Human Autonomy & Integrity Harms"},{value:4,label:"Malicious Use"},{value:5,label:"Information & Safety Harms"}]},{value:4,label:"LLMs' Unique Values",children:[{value:0,label:"User-Oriented"},{value:1,label:"Self-Competent"},{value:2,label:"Idealistic"},{value:3,label:"Social"},{value:4,label:"Ethical"},{value:5,label:"Professional"}]}],s=i("2024/7"),r=[{value:"2024/7",label:"2024/7"}],v=c=>{u.value=u.value.filter(C=>C[0]!==c.parent||C[1]!==c.key),T(u.value)},f=c=>{Q(()=>{V()})},o=m,T=c=>{console.log("handleChange",c),d.value=c.length,x={};const C=[];c.length>0&&c.forEach(E=>{x[E[0]]=x[E[0]]||[],(E[1]||E[1]==0)&&(x[E[0]].push({name:l[E[0]].children[E[1]].label,key:E[1],parent:E[0]}),C.push(l[E[0]].children[E[1]].label))}),o("fitterChange",x),Q(()=>{V()})},y=()=>{u.value=[],T(u.value),Q(()=>{V()})},p=()=>{_.value=!_.value,a.value.style.maxHeight?a.value.style.maxHeight=null:a.value.style.maxHeight=a.value.scrollHeight+"px"},V=()=>{_.value&&(a.value.style.maxHeight=a.value.scrollHeight+"px")};return(c,C)=>{const E=ba,Y=Ca,oe=ha,j=wa,se=Sa,S=ka;return k(),N("div",null,[e("div",yt,[b(j,{modelValue:s.value,"onUpdate:modelValue":C[1]||(C[1]=n=>s.value=n),placeholder:"Measurement Date",onChange:f,style:{width:"200px"}},{default:O(()=>[b(oe,{modelValue:s.value,"onUpdate:modelValue":C[0]||(C[0]=n=>s.value=n),style:{width:"100%"}},{default:O(()=>[(k(),N(L,null,q(r,n=>b(Y,{key:n.value,label:n.label,value:n.value},{default:O(()=>[b(E,{value:n.value},{default:O(()=>[ae(I(n.label),1)]),_:2},1032,["value"])]),_:2},1032,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),b(se,{class:"select",modelValue:u.value,"onUpdate:modelValue":C[2]||(C[2]=n=>u.value=n),options:l,props:h,style:{width:"240px","margin-left":"20px"},"show-all-levels":!1,"collapse-tags":!0,onChange:T,placeholder:"Measurement Dimension"},null,8,["modelValue"]),e("span",{class:"filter-btn",onClick:y},"Reset Filter"),e("span",{class:Be(["show-filter",{"is-show":_.value}]),onClick:p},null,2)]),e("div",{class:"panel-box",ref_key:"panel",ref:a},[e("div",gt,[xt,U(e("div",Ct,[wt,e("div",St,[b(S,{type:"info"},{default:O(()=>[ae(I(s.value),1)]),_:1})])],512),[[K,s.value]]),e("div",kt,"Measurement Dimension("+I(d.value)+")",1),U(e("div",$t,[Tt,e("div",Et,[(k(!0),N(L,null,q(B(x)[1],n=>(k(),le(S,{key:n.key,closable:"",type:"info",onClose:w=>v(n)},{default:O(()=>[ae(I(n.name),1)]),_:2},1032,["onClose"]))),128))])],512),[[K,B(x)[1]]]),U(e("div",Nt,[Rt,e("div",Vt,[(k(!0),N(L,null,q(B(x)[2],n=>(k(),le(S,{key:n.key,closable:"",type:"info",onClose:w=>v(n)},{default:O(()=>[ae(I(n.name),1)]),_:2},1032,["onClose"]))),128))])],512),[[K,B(x)[2]]]),U(e("div",Mt,[zt,e("div",Pt,[(k(!0),N(L,null,q(B(x)[3],n=>(k(),le(S,{key:n.key,closable:"",type:"info",onClose:w=>v(n)},{default:O(()=>[ae(I(n.name),1)]),_:2},1032,["onClose"]))),128))])],512),[[K,B(x)[3]]]),U(e("div",Ft,[At,e("div",Dt,[(k(!0),N(L,null,q(B(x)[4],n=>(k(),le(S,{key:n.key,closable:"",type:"info",onClose:w=>v(n)},{default:O(()=>[ae(I(n.name),1)]),_:2},1032,["onClose"]))),128))])],512),[[K,B(x)[4]]])])],512)])}}},Bt=Ee(Ot,[["__scopeId","data-v-d9ca4a9d"]]),X=t=>(Le("data-v-b7ae4a17"),t=t(),je(),t),Ht={class:"bg comparison-template main-container"},Lt={class:"title-content"},jt=X(()=>e("h2",null,"Compare Pool",-1)),It={class:"compare-model-list"},Ut=["onClick"],qt={class:"name"},Kt={class:"point-num"},Gt=X(()=>e("span",{class:"point"},"points",-1)),Wt={class:"top-item-content"},Zt=X(()=>e("span",{class:"type-icon"},null,-1)),Jt={class:"dev"},Qt={class:"date"},Xt={key:0,class:"max-num-tip"},Yt=X(()=>e("p",{style:{}},"The maximum number of comparisons supported is 5",-1)),el=[Yt],al=X(()=>e("img",{src:at,alt:"add-model"},null,-1)),tl=X(()=>e("p",null,"Add",-1)),ll=[al,tl],ol={class:"chart-box"},sl={class:"chart-tab"},nl={class:"chart-main",style:{}},rl={class:"table-box"},il=X(()=>e("h4",null,"Schwartz Theory of Basic Values",-1)),cl=X(()=>e("h4",null,"Moral Foundations Theory",-1)),ul=X(()=>e("h4",null,"Diverse Safety Risks",-1)),dl={__name:"Comparison",setup(t){const m=i(null),h=i(null),u=i(null);i(null);const _=["rgba(16, 147, 255, 1)","rgba(172, 210, 145, 1)","rgba(113, 134, 201, 1)","rgba(162, 123, 187, 1)","rgba(225, 149, 208, 1)"],a=[{name:"Table",index:0},{name:"Visualization",index:1},{name:"Cultural Alignment",index:2},{name:"Value Space",index:3}];var d=null,x=null,l=null,s=null,r=null,v=null,f=null;const o=i(),T=i([]),y=i(),p=i(!1),V=i([]),c=i([]),C=i([]),E=R=>he.get(R),Y=async()=>{try{he.all([E("./data/models_info.json"),E("./data/Schwartz_scores.json"),E("./data/Schwartz_cases.json"),E("./data/Risk_scores.json"),E("./data/Risk_cases.json"),E("./data/MFT_scores.json"),E("./data/MFT_cases.json")]).then(he.spread(function(R,g,W,Z,P,fe,Re){f=R.data.data,o.value=xe(R.data.data),d=xe(g.data.data),x=W.data.data,l=xe(Z.data.data),s=P.data.data,r=xe(fe.data.data),v=Re.data.data,G=_a(d,l,r);for(let J in o.value){const be=fa(J,[],G);o.value[J].points=(be*100).toFixed(3)}V.value=Object.keys(o.value),w.value=Object.keys(d[V.value[0]]),M.value=w.value,D.value=Object.keys(l[V.value[0]]),F.value=D.value,A.value=Object.keys(r[V.value[0]]),H.value=A.value,ee?c.value=[ee]:c.value.push(V.value[0]),S()}))}catch(R){console.error("Fetch error:",R)}},oe=(R,g)=>g.label=="model_name"?R[g.label]:(R[g.label]*100).toFixed(3),j=i(0),se=R=>{console.log(R),j.value=R.index},S=()=>{p.value=!1,console.log(c.value),c.value.length>5&&alert("最多可添加5个model"),_e(),T.value=""},n=(R,g)=>{c.value.length<=1||(c.value.splice(g,1),S())},w=i([]),A=i([]),D=i([]),M=i([]),H=i([]),F=i([]),z=i([]),ne=i([]),re=i([]),_e=()=>{C.value=[],c.value.length>5&&alert("最多可添加5个model");var R=[];for(let g=0;g<c.value.length&&!(g>=5);g++){console.log(C.value);let W=!1;C.value.forEach(P=>{console.log("item",P,c.value[g]),P.model_name==c.value[g]&&(W=!0),R.push(P.color)});let Z=_.filter(P=>R.every(fe=>fe!=P));if(!W){let P={};P.color=Z[0],P.model_name=c.value[g],P.model_info=o.value[c.value[g]],P.Schwartz_data=d[c.value[g]],P.Risk_data=l[c.value[g]],P.MFT_data=r[c.value[g]],C.value.push(P)}}console.log("checkedModelDetailList.value",C.value),z.value=[],ne.value=[],re.value=[];for(let g=0;g<C.value.length;g++){let W={};W=d[c.value[g]],W.model_name=c.value[g],z.value.push(W);let Z={};Z=l[c.value[g]],Z.model_name=c.value[g],re.value.push(Z);let P={};P=r[c.value[g]],P.model_name=c.value[g],ne.value.push(P)}m.value.setRadarChart(C.value),h.value.setHotChart(c.value),console.log("checkedModelDetailList.value",C.value),u.value.setValueSpacesData(C.value)};Ye(()=>{});let ee=null;const ue=Fa();let ge=!0;pe(()=>{console.log("首页传过来的modelName："+ue.query.modelName),ee=ue.query.modelName,Y()}),Aa(()=>{ge?ge=!1:(ee=ue.query.modelName,ee&&(console.log("首页传过来的modelName："+ue.query.modelName),c.value=[ee],S()))});let G=null;const oa=R=>{console.log("filerData",R),R[1]?M.value=R[1].map(g=>g.name):M.value=w.value,R[2]?H.value=R[2].map(g=>g.name):H.value=A.value,R[3]?F.value=R[3].map(g=>g.name):F.value=D.value,m.value.setRadarChart(C.value,{Schwartz_data:M.value,MFT_data:H.value,Risk_data:F.value})};return(R,g)=>{const W=ya,Z=Ta,P=Ea,fe=ga,Re=et,qe=Ya,J=Na,be=$a,sa=xa;return k(),N("div",Ht,[e("div",null,[e("div",Lt,[jt,e("div",It,[e("ul",null,[(k(!0),N(L,null,q(C.value,($,ie)=>(k(),N("li",{key:$,style:He({"border-color":$.color})},[e("span",{class:"close-comparison",onClick:vl=>n($.model_name,ie)},null,8,Ut),e("p",qt,I($.model_name),1),e("p",Kt,[ae(I($.model_info.points),1),Gt]),e("div",Wt,[b(W,{effect:"customized",content:"Proprietary",placement:"top"},{default:O(()=>[Zt]),_:1}),e("span",Jt,I($.model_info.developer),1),e("span",Qt,I($.model_info["release date"].split(" ")[0]),1)])],4))),128)),C.value.length>=5?(k(),N("div",Xt,el)):de("",!0),C.value.length<5?U((k(),N("div",{key:1,class:"add-model",onClick:g[0]||(g[0]=$=>p.value=!0)},ll)),[[sa,y.value]]):de("",!0),b(fe,{ref_key:"popoverRef",ref:y,visible:p.value,placement:"right-start",width:576,trigger:"click","virtual-triggering":"",persistent:""},{default:O(()=>[e("div",null,[b(P,{modelValue:c.value,"onUpdate:modelValue":g[1]||(g[1]=$=>c.value=$),max:5},{default:O(()=>[(k(!0),N(L,null,q(V.value,$=>(k(),le(Z,{key:$,value:$},{default:O(()=>[ae(I($),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),e("div",{style:{display:"flex","justify-content":"flex-end","margin-top":"20px","padding-right":"20px"}},[e("button",{onClick:S},"Submit")])])]),_:1},8,["visible"])])])])]),e("div",ol,[e("div",sl,[b(qe,{modelValue:j.value,"onUpdate:modelValue":g[2]||(g[2]=$=>j.value=$),onTabClick:se},{default:O(()=>[(k(),N(L,null,q(a,$=>b(Re,{key:$.index,label:"   "+$.name+"   ",name:$.index},null,8,["label","name"])),64))]),_:1},8,["modelValue"])]),e("div",nl,[U(b(Bt,{onFitterChange:oa},null,512),[[K,j.value==0||j.value==1]]),U(e("div",rl,[il,b(be,{data:z.value,border:"",style:{width:"100%"}},{default:O(()=>[b(J,{prop:"model_name",label:"Model"}),(k(!0),N(L,null,q(M.value,($,ie)=>(k(),N(L,{key:ie},[$!="model_name"?(k(),le(J,{key:0,prop:$,label:$,formatter:oe},null,8,["prop","label"])):de("",!0)],64))),128))]),_:1},8,["data"]),cl,b(be,{data:ne.value,border:"",style:{width:"100%"}},{default:O(()=>[b(J,{prop:"model_name",label:"Model"}),(k(!0),N(L,null,q(H.value,($,ie)=>(k(),N(L,{key:ie},[$!="model_name"?(k(),le(J,{key:0,prop:$,label:$,formatter:oe},null,8,["prop","label"])):de("",!0)],64))),128))]),_:1},8,["data"]),ul,b(be,{data:re.value,border:"",style:{width:"100%"}},{default:O(()=>[b(J,{prop:"model_name",label:"Model"}),(k(!0),N(L,null,q(F.value,($,ie)=>(k(),N(L,{key:ie},[$!="model_name"?(k(),le(J,{key:0,prop:$,label:$,formatter:oe},null,8,["prop","label"])):de("",!0)],64))),128))]),_:1},8,["data"])],512),[[K,j.value==0]]),U(e("div",null,[b(ut,{ref_key:"VisualizationComponentProps",ref:m},null,512)],512),[[K,j.value==1]]),U(e("div",null,[b(ft,{ref_key:"ValueSpaceComponentProps",ref:u},null,512)],512),[[K,j.value==3]]),U(e("div",null,[b(ht,{ref_key:"CulturalAlignmentComponentProps",ref:h},null,512)],512),[[K,j.value==2]])])])])}}},xl=Ee(dl,[["__scopeId","data-v-b7ae4a17"]]);export{xl as default};
